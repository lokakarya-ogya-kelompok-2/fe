<app-navbar />
<div>
  <p-card id="card-header">
    <div class="flex justify-content-center align-items-center">
      <h2 class="text-xl font-semibold m-0">
        Employee Development Plans Assessment
      </h2>
    </div>
  </p-card>
</div>
<app-user-information />
<form #empDevPlanForm="ngForm" class="card m-4 p-4">
  @for (devPlan of devPlans; track devPlan.id) {
  <div class="inner-card w-full">
    <div class="mb-4">
      <h2 class="text-xl font-bold mb-3 text-center">
        {{ devPlan.plan }}
      </h2>

      @for (inputForm of empDevPlans[devPlan.id]; track $index) {
      <div class="p-2 mb-2 border-1 border-round surface-border">
        <div class="flex flex-column md:flex-row gap-3 align-items-center">
          <div class="flex-1">
            <input
              type="text"
              pInputText
              class="w-full"
              [(ngModel)]="empDevPlans[devPlan.id][$index].detail"
              [name]="'detail_' + devPlan.id + '_' + $index"
              placeholder="Enter details"
              [disabled]="empDevPlans[devPlan.id][$index].id != undefined"
              required
            />
          </div>
          <div class="flex gap-2" style="min-width: 2.5rem">
            @if (empDevPlans[devPlan.id][$index].id == undefined) {
            <p-button
              icon="pi pi-trash"
              severity="danger"
              (onClick)="removeField(devPlan.id, $index)"
            />
            }
          </div>
        </div>
      </div>
      }

      <div class="flex justify-content-end mt-3">
        <p-button
          label="Add Field"
          icon="pi pi-plus"
          (onClick)="addField(devPlan.id)"
          severity="secondary"
        />
      </div>
    </div>
  </div>
  }

  <div class="flex justify-content-center mt-4">
    <p-button
      label="Submit"
      icon="pi pi-check"
      (onClick)="onSubmit()"
      severity="primary"
      [disabled]="empDevPlanForm.invalid"
    />
  </div>
</form>

<p-toast position="bottom-right" />
