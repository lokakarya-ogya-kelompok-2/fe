<app-navbar />
<app-user-information />
<!-- <form #empAttitudeSkillForm="ngForm" id="empAttitudeSkillForm">
  <div *ngFor="let plan of plans" class="mb-4">
    <h2 class="text-xl font-bold mb-2">{{ plan.dev_plan_id.plan }}</h2>
    <p-table
      [tableStyle]="{
        'min-width': '50rem',
        'box-shadow': '0 4px 6px rgba(0, 0, 0, 0.1)',
        'border-radius': '8px',
        'table-layout': 'fixed'
      }"
      [style]="{ width: '100%' }"
      class="p-datatable-striped p-datatable-gridlines custom-table"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="custom-header" style="width: 60%">Attitude Skill</th>
          <th class="custom-header" style="width: 40%">Input Field</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-skill let-i="rowIndex">
        <tr>
          <td>{{ skill.attitude_skill }}</td>
          <td>
            <div class="card flex justify-content-center">
              <p-dropdown
                [(ngModel)]="skill.score"
                optionLabel="category"
                optionValue="score"
                placeholder="Select score category"
                class="custom-dropdown"
                appendTo="body"
                required
              />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <p-divider />
  <div class="card flex justify-content-center">
    <p-button
      label="Submit"
      type="submit"
      form="empAttitudeSkillForm"
      [disabled]="empAttitudeSkillForm.invalid"
    />
  </div>
</form> -->
<form #empDevPlanForm="ngForm" class="card m-4 p-4">
  @for (devPlan of devPlans; track devPlan.id) {
  <div class="mb-4">
    <h2 class="text-xl font-bold mb-3 text-center">
      {{ devPlan.plan }}
    </h2>

    @for (inputForm of empDevPlans[devPlan.id]; track $index) {
    <div class="p-2 mb-2 border-1 border-round surface-border">
      <div class="flex flex-column md:flex-row gap-3 align-items-center">
        <div class="flex-1">
          <input
            type="text"
            pInputText
            class="w-full"
            [(ngModel)]="empDevPlans[devPlan.id][$index].detail"
            [name]="'detail_' + devPlan.id + '_' + $index"
            placeholder="Enter details"
            [disabled]="empDevPlans[devPlan.id][$index].id != undefined"
            required
          />
        </div>
        <!-- <div class="flex-1">
          
          <p-dropdown
            [options]="skillLevels"
            [(ngModel)]="empTechnicalSkills[technicalSkill.id][$index].score"
            [name]="'score_' + technicalSkill.id + '_' + $index"
            optionLabel="description"
            optionValue="level"
            placeholder="Select your knowledge level"
            class="w-full"
            [disabled]="
              empTechnicalSkills[technicalSkill.id][$index].id != undefined
            "
            required
          />
        </div> -->
        <div class="flex gap-2" style="min-width: 2.5rem">
          @if (empDevPlans[devPlan.id][$index].id == undefined) {
          <p-button
            icon="pi pi-trash"
            severity="danger"
            (onClick)="removeField(devPlan.id, $index)"
          />
          }
        </div>
      </div>
    </div>
    }

    <div class="flex justify-content-end mt-3">
      <p-button
        label="Add Field"
        icon="pi pi-plus"
        (onClick)="addField(devPlan.id)"
        severity="secondary"
      />
    </div>
  </div>
  }

  <div class="flex justify-content-center mt-4">
    <p-button
      label="Submit"
      icon="pi pi-check"
      (onClick)="onSubmit()"
      severity="primary"
      [disabled]="empDevPlanForm.invalid"
    />
    <!-- [disabled]="!technicalSkillForm.valid" -->
  </div>
</form>

<p-toast position="bottom-right" />
