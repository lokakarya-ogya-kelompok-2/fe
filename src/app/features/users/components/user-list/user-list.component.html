<p-table
  #userTable
  [scrollable]="true"
  scrollHeight="380px"
  [value]="users"
  dataKey="id"
  [rows]="10"
  [rowsPerPageOptions]="[10, 20, 50]"
  [loading]="isLoading"
  [paginator]="true"
  [tableStyle]="{
    'min-width': '50rem',
    'text-align': 'center',
    'font-size': '12px',
    margin: 0
  }"
  [globalFilterFields]="[
    'full_name',
    'username',
    'email',
    'position',
    'division.division_name'
  ]"
>
  <ng-template pTemplate="caption">
    <div class="flex">
      <div>
        <p-button
          id="btn-add"
          label="Add User"
          icon="pi pi-users"
          (onClick)="showDialog(dialogType.ADD)"
        />
        <p-dialog
          [header]="dialogHeader"
          [modal]="true"
          [(visible)]="visible"
          [maximizable]="true"
        >
          @if (currentDialogType === dialogType.DETAIL) {
          <app-user-detail [userData]="selectedUser" />
          } @else {
          <app-user-form
            [userData]="selectedUser"
            (submit)="onSubmit()"
            (onCancel)="this.visible = false"
          />
          }
        </p-dialog>
      </div>
      <p-iconField iconPosition="left" class="ml-auto">
        <p-inputIcon>
          <i class="pi pi-search"></i>
        </p-inputIcon>
        <input
          pInputText
          type="text"
          placeholder="Search keyword"
          (input)="onGlobalFilter(userTable, $event)"
        />
      </p-iconField>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <!-- <th>ID</th> -->
      <th>Full Name</th>
      <th>Username</th>
      <th>Position</th>
      <th>Action</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <!-- <td>{{ user.id }}</td> -->
      <td>{{ user.full_name }}</td>
      <td>{{ user.username }}</td>
      <td>{{ user.position }}</td>
      <td style="justify-content: space-between; display: flex">
        <p-button
          severity="primary"
          icon="pi pi-info-circle"
          (onClick)="showDialog(dialogType.DETAIL, user)"
        />
        <p-button
          severity="success"
          icon="pi pi-pen-to-square"
          (onClick)="showDialog(dialogType.UPDATE, user)"
        />
        <p-button
          severity="danger"
          icon="pi pi-trash"
          (onClick)="onDelete($event, user.id)"
        />
        <p-confirmDialog key="{{ user.id }}" />
      </td>
    </tr>
  </ng-template>
</p-table>
